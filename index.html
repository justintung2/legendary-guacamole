<!DOCTYPE html>
<html>
<head>
 	<meta charset="utf-8" />
 	<meta name="viewport" content="width=device-width, initial-scale=1.0">
 	<script src='https://api.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.js'></script>
 	<link rel="stylesheet" href="https://rawgit.com/tpreusse/radar-chart-d3/master/src/radar-chart.css">
 	<link href='https://api.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.css' rel='stylesheet' />
 	<script src="http://d3js.org/d3.v3.js"></script>
	<script src="https://rawgit.com/tpreusse/radar-chart-d3/master/src/radar-chart.js"></script>
 	<link href='style.css' rel='stylesheet' />
 	<link href="https://fonts.googleapis.com/css?family=Josefin+Sans" rel="stylesheet">
    <link href='https://api.tiles.mapbox.com/mapbox.js/v1.0.0/mapbox.css' rel='stylesheet' />
<script src='https://api.tiles.mapbox.com/mapbox.js/v1.0.0/mapbox.js'></script>
<!-- <script src='zip_code_040114.json'></script> -->
<script src='cheerup.json'></script>
</head>
<style>
 html,
 body,
 #map {
     padding: 0;
     margin: 0;
     width: 100%;
     height: 100%;
 }
 .leaflet-top-pane {
     pointer-events: none;
 }
 </style>
<body>

	<div id="navbar">
		<a href>Noise</a>
		<a href>Parks</a>
		<a href>Public Transportation</a>
		<a href>Income</a>
	</div>


	<div id='map'></div>

	<div class="charts"></div>

	<div class="notes">
		<p>Saved Zip Codes</p>
	</div>

	<script>


	// When the user scrolls the page, execute myFunction
	window.onscroll = function() {myFunction()};

	// Get the navbar
	var navbar = document.getElementById("navbar");

	// Get the offset position of the navbar
	var sticky = navbar.offsetTop;

	// Add the sticky class to the navbar when you reach its scroll position. Remove "sticky" when you leave the scroll position
	function myFunction() {
	  if (window.pageYOffset >= sticky) {
	    navbar.classList.add("sticky")
	  } else {
	    navbar.classList.remove("sticky");
	  }
	}


	RadarChart.defaultConfig.color = function() {};
	RadarChart.defaultConfig.radius = 3;
	RadarChart.defaultConfig.w = 400;
	RadarChart.defaultConfig.h = 400;
	</script>

	<span></span>

	<script>
	var data = [
	  {
	    className: 'characteristics', // optional can be used for styling
	    axes: [
	      {axis: "parks", value: 10},
	      {axis: "transportation", value: 6},
	      {axis: "noise", value: 5},
	      {axis: "income", value: 9}
	    ]
	  },

	];
	function randomDataset() {
	  return data.map(function(d) {
	    return {
	      className: d.className,
	      axes: d.axes.map(function(axis) {
	        return {axis: axis.axis, value: (0.4 * 10)};
	      })
	    };
	  });
	}

	var chart = RadarChart.chart();
	var cfg = chart.config(); // retrieve default config
	var svg = d3.select('body').append('svg')
	  .attr('width', cfg.w + cfg.w + 50)
	  .attr('height', cfg.h + cfg.h / 4);
	svg.append('g').classed('single', 1).datum(randomDataset()).call(chart);


	</script>


<!-- <script>
	mapboxgl.accessToken = "pk.eyJ1IjoianQ2ODlzcDE4IiwiYSI6ImNqZXJtdTV2aTE2NW8yd2x0YTRyZnBnMHMifQ.yhMtx5-uADU9vqGlVgQT4g"
	var map = new mapboxgl.Map({
		container:"map",
		style: "mapbox://styles/jt689sp18/cjgnw8klb00062rp9hh2fgi94",
		center: [-73.9851,40.7589],
		zoom:9
	})

	map.scrollZoom.disable()
	map.addControl(new mapboxgl.NavigationControl());
	map.getCanvas().style.cursor = 'default';
	map.dragRotate.disable();
	map.touchZoomRotate.disableRotation();

</script> -->
<script type="text/javascript">
 var map = L.mapbox.map('map').setView([40.75, -73.94], 15);

// Set base style of vector data
 function style(feature) {
     console.log("into the new world");
     return {
     weight: 0,
     fillOpacity: 0.5,
     fillColor: '#FFEDA0'
     };
 }

// Set hover colors
 function highlightFeature(e) {
     console.log(e);
 var layer = e.target;
     layer.setStyle({
         weight: 10,
         opacity: 1,
         color: '#09F',
         dashArray: '3',
         fillOpacity: 0.7,
         fillColor: '#FEB24C'
     });
 }

// A function to reset the colors when a neighborhood is not longer 'hovered'
 function resetHighlight(e) {
 geojson.resetStyle(e.target);
 }

// Tell MapBox.js what functions to call when mousing over and out of a neighborhood
 function onEachFeature(feature, layer) {
 layer.on({
 mouseover: highlightFeature,
 mouseout: resetHighlight
 });
 }

// Add vector data to map
 geojson = L.geoJson(neighborhoods, {
     style: style,
     onEachFeature: onEachFeature
 }).addTo(map);

 // console.log(geojson);
// Here is where the magic happens: Manipulate the z-index of tile layers,
 // this makes sure our vector data shows up above the background map and
 // under roads and labels.
 var topPane = map._createPane('leaflet-top-pane', map.getPanes().mapPane);
 var topLayer = L.mapbox.tileLayer('bobbysud.map-3inxc2p4').addTo(map);
 topPane.appendChild(topLayer.getContainer());
 topLayer.setZIndex(100);

</script>


</body>
</html>
